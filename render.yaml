services:
  - type: web
    name: n8n-elvis-new
    env: docker
    region: oregon
    plan: starter
    dockerfilePath: ./Dockerfile
    dockerContext: .
    # Add a persistent disk to store your files
    disk:
      name: n8n_data
      mountPath: /home/node/.n8n
      sizeGB: 10
    envVars:
      - key: PORT
        value: "5678"
      - key: N8N_PORT
        value: "5678"
      # This is the "Bouncer" - set to false to allow writing
      - key: N8N_BLOCK_FS_WRITE_ACCESS
        value: "false"
      # Whitelist the specific folder
      - key: N8N_RESTRICT_FILE_ACCESS_TO
        value: "/home/node/.n8n/tmp"
      # Optional: Use filesystem for large binary files
      - key: N8N_DEFAULT_BINARY_DATA_MODE
        value: "filesystem"
    healthCheckPath: /healthz
